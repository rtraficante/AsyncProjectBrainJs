const net = new brain.NeuralNetwork();

const data = [
  { input: { r: 0, g: 0, b: 0 }, output: [1] },
  { input: { r: 1, g: 1, b: 1 }, output: [0] },
  {
    input: {
      r: 0.4729604079702099,
      g: 0.5839995069066233,
      b: 0.13495252193998475,
    },
    output: [0],
  },
  {
    input: {
      r: 0.4192898107467786,
      g: 0.13942330070806008,
      b: 0.9928221361735614,
    },
    output: [1],
  },
  {
    input: {
      r: 0.393792119501599,
      g: 0.3253507361159427,
      b: 0.7709580598606949,
    },
    output: [1],
  },
  {
    input: {
      r: 0.7416919673712747,
      g: 0.6182197214832148,
      b: 0.6905273885246666,
    },
    output: [0],
  },
  {
    input: {
      r: 0.5076133829846217,
      g: 0.9335185139491207,
      b: 0.7978493735246139,
    },
    output: [0],
  },
  {
    input: {
      r: 0.8830734197213286,
      g: 0.3739662699273725,
      b: 0.5594625708581002,
    },
    output: [1],
  },
  {
    input: {
      r: 0.2127016666186503,
      g: 0.5451803444225432,
      b: 0.27004193922451614,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6010816503869338,
      g: 0.8583633934555412,
      b: 0.3932187738611641,
    },
    output: [0],
  },
  {
    input: {
      r: 0.8928161094000826,
      g: 0.21732291184228614,
      b: 0.4151500134808912,
    },
    output: [1],
  },
  {
    input: {
      r: 0.5607237603663102,
      g: 0.8183115966103178,
      b: 0.15076678639116237,
    },
    output: [0],
  },
  {
    input: {
      r: 0.43291385155943596,
      g: 0.17150597445313465,
      b: 0.9988394652163071,
    },
    output: [1],
  },
  {
    input: {
      r: 0.4635132118065064,
      g: 0.40805421836061395,
      b: 0.7021984668057872,
    },
    output: [1],
  },
  {
    input: {
      r: 0.18421327537645382,
      g: 0.8254551066685729,
      b: 0.5509228042513399,
    },
    output: [0],
  },
  {
    input: {
      r: 0.1964365747149206,
      g: 0.014865963048485087,
      b: 0.4509060694425093,
    },
    output: [1],
  },
  {
    input: {
      r: 0.41014136018915437,
      g: 0.044497140198851426,
      b: 0.553633800769461,
    },
    output: [1],
  },
  {
    input: {
      r: 0.3146698280773641,
      g: 0.773182999742849,
      b: 0.30514262406535875,
    },
    output: [0],
  },
  {
    input: {
      r: 0.3385518103520153,
      g: 0.7498497032731055,
      b: 0.017228117772972507,
    },
    output: [1],
  },
  {
    input: {
      r: 0.46617231368217893,
      g: 0.6659484921360561,
      b: 0.20492814916870294,
    },
    output: [1],
  },
  {
    input: {
      r: 0.4610644467278229,
      g: 0.19562106598894324,
      b: 0.6299753065000357,
    },
    output: [1],
  },
  {
    input: {
      r: 0.7799445786368722,
      g: 0.6955338515741654,
      b: 0.5540145600519681,
    },
    output: [0],
  },
  {
    input: {
      r: 0.9658852557644906,
      g: 0.08454149179143955,
      b: 0.47071154153717765,
    },
    output: [0],
  },
  {
    input: {
      r: 0.7421811599554982,
      g: 0.8115555097999736,
      b: 0.7837237988708943,
    },
    output: [0],
  },
  {
    input: {
      r: 0.19829490298333874,
      g: 0.3408801169771143,
      b: 0.290331266739569,
    },
    output: [1],
  },
  {
    input: {
      r: 0.20335330493655435,
      g: 0.4791185879047015,
      b: 0.7927474399769643,
    },
    output: [1],
  },
  {
    input: {
      r: 0.2766578153344379,
      g: 0.5811104890337533,
      b: 0.04210196102209274,
    },
    output: [1],
  },
  {
    input: {
      r: 0.10155016555637197,
      g: 0.4453732228065794,
      b: 0.04331772071987605,
    },
    output: [1],
  },
  {
    input: {
      r: 0.16321484039765832,
      g: 0.25135760126845064,
      b: 0.8177357580418614,
    },
    output: [1],
  },
  {
    input: {
      r: 0.878306322656953,
      g: 0.7739406785393506,
      b: 0.003633159253453977,
    },
    output: [0],
  },
  {
    input: {
      r: 0.7763978243101715,
      g: 0.2512739330978091,
      b: 0.6268998565751509,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6065860369248492,
      g: 0.11685611627751258,
      b: 0.155377939994499,
    },
    output: [1],
  },
  {
    input: {
      r: 0.3005117730987974,
      g: 0.24204317800138497,
      b: 0.8787183248992667,
    },
    output: [1],
  },
  {
    input: {
      r: 0.5997777304405909,
      g: 0.35823811721256105,
      b: 0.04934213246400776,
    },
    output: [0],
  },
  {
    input: {
      r: 0.18189662393021866,
      g: 0.6685368460971646,
      b: 0.4851705997745972,
    },
    output: [0],
  },
  {
    input: {
      r: 0.2737763603350225,
      g: 0.9147398248576937,
      b: 0.39584038100982744,
    },
    output: [0],
  },
  {
    input: {
      r: 0.6980104734125228,
      g: 0.30106849734081464,
      b: 0.4888396870935987,
    },
    output: [1],
  },
  {
    input: {
      r: 0.4362723080445827,
      g: 0.7542218955344797,
      b: 0.2041449076380477,
    },
    output: [0],
  },
  {
    input: {
      r: 0.0249637305715269,
      g: 0.9096199101660605,
      b: 0.5092378169752287,
    },
    output: [0],
  },
  {
    input: {
      r: 0.6255643119320637,
      g: 0.13901667367374482,
      b: 0.8067279252187798,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6732639378320779,
      g: 0.2783234294597261,
      b: 0.022357932587457663,
    },
    output: [1],
  },
  {
    input: {
      r: 0.4209358884170251,
      g: 0.4073141842359478,
      b: 0.8192101503664881,
    },
    output: [1],
  },
  {
    input: {
      r: 0.9958769413713775,
      g: 0.8830210926457138,
      b: 0.16935064999960914,
    },
    output: [0],
  },
  {
    input: {
      r: 0.9729624019297431,
      g: 0.5185603306430815,
      b: 0.007103143270704271,
    },
    output: [0],
  },
  {
    input: {
      r: 0.825326721345863,
      g: 0.3279361135408305,
      b: 0.2963621371402527,
    },
    output: [1],
  },
  {
    input: {
      r: 0.2684908344347161,
      g: 0.9250210391684937,
      b: 0.5370298777986819,
    },
    output: [0],
  },
  {
    input: {
      r: 0.9217439360286077,
      g: 0.09963851936568924,
      b: 0.7344164021566135,
    },
    output: [1],
  },
  {
    input: {
      r: 0.30971240009651035,
      g: 0.0670106273248281,
      b: 0.035855810745740735,
    },
    output: [1],
  },
  {
    input: {
      r: 0.8497481055152953,
      g: 0.5431507060698946,
      b: 0.7660814032992354,
    },
    output: [1],
  },
  {
    input: {
      r: 0.504866099990563,
      g: 0.2851685342100303,
      b: 0.06832991226176133,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6484477512973996,
      g: 0.8675579323437932,
      b: 0.5921804828139072,
    },
    output: [0],
  },
  {
    input: {
      r: 0.44325318605168884,
      g: 0.8492347297854559,
      b: 0.9391658717995632,
    },
    output: [0],
  },
  {
    input: {
      r: 0.12023320412447513,
      g: 0.4534950976712986,
      b: 0.23719767779234147,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6492255844991355,
      g: 0.23410470848714726,
      b: 0.42471443927155117,
    },
    output: [1],
  },
  {
    input: {
      r: 0.7616784077420975,
      g: 0.46803472637479904,
      b: 0.11961480029831684,
    },
    output: [1],
  },
  {
    input: {
      r: 0.46408463991332716,
      g: 0.9619377395445836,
      b: 0.7981291175196779,
    },
    output: [0],
  },
  {
    input: {
      r: 0.3405660899533576,
      g: 0.7654982025462356,
      b: 0.9476467847131784,
    },
    output: [0],
  },
  {
    input: {
      r: 0.8939055007534715,
      g: 0.10644841802099148,
      b: 0.5150790793314748,
    },
    output: [1],
  },
  {
    input: {
      r: 0.6607676975915162,
      g: 0.6630603686397534,
      b: 0.21018912892160846,
    },
    output: [0],
  },
  {
    input: {
      r: 0.5136981159181557,
      g: 0.8742342486562471,
      b: 0.9804318727434782,
    },
    output: [0],
  },
  {
    input: {
      r: 0.9197044140926822,
      g: 0.8178962175398372,
      b: 0.20932636836742824,
    },
    output: [0],
  },
  {
    input: {
      r: 0.7571974587457688,
      g: 0.6909381470776486,
      b: 0.38972366738418374,
    },
    output: [0],
  },
  {
    input: {
      r: 0.9287150199044258,
      g: 0.33114014321737395,
      b: 0.739971162946413,
    },
    output: [1],
  },
];

net.train(data);

const colorEl = document.getElementById("color");
const guessEl = document.getElementById("guess");
const whiteButton = document.getElementById("white-button");
const blackButton = document.getElementById("black-button");
const printButton = document.getElementById("print-button");

let color;
setRandomColor();

whiteButton.addEventListener("click", () => {
  chooseColor(1);
});

blackButton.addEventListener("click", () => {
  chooseColor(0);
});

printButton.addEventListener("click", () => {
  print();
});

function chooseColor(value) {
  data.push({
    input: color,
    output: [value],
  });
  setRandomColor();
}

function print() {
  console.log(JSON.stringify(data));
}

function setRandomColor() {
  color = {
    r: Math.random(),
    g: Math.random(),
    b: Math.random(),
  };

  const guess = net.run(color)[0];

  guessEl.style.color = guess > 0.5 ? "#FFF" : "#000";
  colorEl.style.backgroundColor = `rgba(${color.r * 255}, ${color.g * 255}, ${
    color.b * 255
  })`;
}
